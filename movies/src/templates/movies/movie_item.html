<div class="col-md-4 mb-4">
    <div class="card h-100 d-flex flex-column">

        <!-- Ссылка с изображением -->
        <a href="{% url 'movie_detail' movie.id %}" class="stretched-link">
            <img src="{{ movie.get_image_url }}" class="card-img-top" alt="{{ movie.title }}">
        </a>

        <div class="card-body d-flex flex-column">

            <h5 class="card-title text-truncate">{{ movie.title }} </h5>
            <div class="mt-auto">

                <!-- Год и страны -->
                <h6 class="card-text text-muted mb-1 text-truncate">
                    {{ movie.year }} · {{ movie.countries.all|join:", " }}
                </h6>

                <!-- Жанры -->
                <p class="card-text text-muted mb-1 text-truncate">
                    {{ movie.genres.all|join:", " }}
                </p>

                <!-- Актеры -->
                <p class="card-text text-muted text-truncate">
                    <small>В ролях:</small> {{ movie.actors.all|join:", " }}
                </p>

                <p class="card-text">{{ movie.description|truncatechars:85 }}</p>

            <!-- Рейтинг и кнопка -->

                <div class="d-flex justify-content-between align-items-center">

                    <div class="d-flex align-items-center">
                        <!-- Количество рецензий -->
                        <i class="bi bi-chat-square-text text-secondary me-1"></i>  <!-- Иконка чата -->
                        <span class="me-3">{{ movie.review_count|default:"0" }}</span>
                        <!-- Рейтинг -->
                        <i class="bi bi-star-fill text-warning me-2"></i>  <!-- Иконка звезды -->
                        <span class="fs-5">{{ movie.average_rating|default:"0.0" }}</span> <!-- Средний рейтинг -->
                        <span class="text-muted ms-2">({{ movie.rating_count|default:"0" }})</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
